<!DOCTYPE html>
<html lang="zh-CN" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="https://i.328888.xyz/2023/04/14/ixDL13.jpeg"
      type="image/png" />
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <link
      href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0-alpha3/css/bootstrap.css"
      rel="stylesheet" />
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0-alpha3/js/bootstrap.bundle.js"></script>
    <title>
      4-8flat()多层数组转一维数组flatMap()先执行map方法再执行flat方法
    </title>
  </head>
  <body>
    <script>
      console.log([1, [2, [3]]].flat()); // [1, 2, [3]]

      // 指定转换后的嵌套层数
      console.log([1, [2, [3, [4, 5]]]].flat(2)); // [1, 2, 3, [4, 5]]

      // 不管嵌套多少层
      console.log([1, [2, [3, [4, 5]]]].flat(Infinity)); // [1, 2, 3, 4, 5]

      // flat()方法会自动跳过空元素
      console.log([1, [2, , 3]].flat()); // [1, 2, 3]
    </script>
    <p>
      JavaScript中，flatMap()方法是一个返回一个新数组的方法，它通过对数组中的每个元素应用一个回调函数，并将结果展开一级。它等同于先调用map()方法，再调用深度为1的flat()方法（arr.map(...args).flat()），但比分别调用这两个方法稍微更高效一些
    </p>
    <script>
      const arr1 = ["it's Sunny in", "", "California"];
      arr1.flatMap((x) => x.split(" "));
      // ["it's","Sunny","in", "", "California"]
    </script>
  </body>
</html>
